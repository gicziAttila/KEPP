<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/10.8.0/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/10.8.0/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-functions-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-messaging-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-analytics-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-remote-config-compat.js"></script>
    <script defer src="/__/firebase/10.8.0/firebase-performance-compat.js"></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
    <link rel="stylesheet" href="css/login.css">
    <title>Login</title>
</head>

<body>
    <div class="container-fluid d-flex justify-content-center align-items-center flex-column kontener" style="display: block;">
        <form class="d-flex align-items-center w-50 text-center flex-column p-5 mt-4 glass" id="login_form">
            <p class="text-light mb-3 fs-1"><strong>K</strong>özösségi <strong>E</strong>semények <strong>P</strong>ortálja</p>
            <div class="mb-3">
                <input type="email" class="form-control" placeholder="Email cím" id="email_input" required>
            </div>
            <div class="mb-3">
                <input type="password" class="form-control" placeholder="Jelszó" id="password_input" required>
            </div>
                <button type="submit" class="btn btn-light">Bejelentkezés</button>
            <div class="line mt-4"></div>
            <div class="mt-3">
                <a class="text-light linkStyle" href="signup.html">Ha még nem rendelkezel fiókkal kattints ide</a>
            </div>
        </form>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC7xvxOlaNCefNPG_k6zfzUy66tVrfHrzg",
            authDomain: "kep-projekt-52ffc.firebaseapp.com",
            projectId: "kep-projekt-52ffc",
            storageBucket: "kep-projekt-52ffc.appspot.com",
            messagingSenderId: "610304417358",
            appId: "1:610304417358:web:14fa023540900344182d1f"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app)
        const loginForm = document.getElementById("login_form")

        //login
        loginForm.addEventListener('submit', function (event) {
            event.preventDefault()
            const userEmail = document.getElementById("email_input").value
            const userPassword = document.getElementById("password_input").value

            signInWithEmailAndPassword(auth, userEmail, userPassword)
                .then(function (userCredential) {
                    var user = userCredential.user;
                    console.log("Sikeres bejelentkezés:", user);
                    window.location.href = "index.html"
                })
                .catch(function (error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    console.error("Bejelentkezési hiba:", errorCode, errorMessage);
                });
        })
    </script>

</body>

</html>